{"version":3,"sources":["app.js","dnd-draggable-item.js","dnd-drop-target.js","dnd-item.js","dnd-list-impl.js","dnd-list.js","dnd-service.js","dnd-test.js","environment.js","main.js","resources/index.js","/Users/alexanderkarmanov/Documents/Jahia/aurilia/dnd/src/app.html","/Users/alexanderkarmanov/Documents/Jahia/aurilia/dnd/src/dnd-item.html","/Users/alexanderkarmanov/Documents/Jahia/aurilia/dnd/src/dnd-list-impl.html","/Users/alexanderkarmanov/Documents/Jahia/aurilia/dnd/src/dnd-test.html"],"names":["App","list","type","id","item","draggable","list2","list3","message","DraggableItem","defaultBindingMode","twoWay","oneWay","element","dndService","effect","enforceTypeCompatibility","onDrag","event","index","onDragCallback","onDragStart","initiateDragging","topLevelItem","dataTransfer","setData","JSON","stringify","dropEffect","onDragStartCallback","onDragEnd","cleanUpPlaceHolder","onDragEndCallback","DropTarget","onDragOver","preventDefault","stopPropagation","addPlaceHolder","onDragOverCallback","onDrop","undefined","data","handleDrop","parse","getData","splice","onDropCallback","placeholder","getPlaceHolder","nextSibling","tagName","getSiblingPositionInList","previousSibling","console","log","sibling","childNodes","i","length","DndItem","Element","style","opacity","DndListImpl","DragAndDropList","target","droppedCallback","DragAndDropService","DOM","isDragging","push","createPlaceholder","createElement","className","classList","contains","listHolder","parentNode","isEqualNode","appendChild","isMouseInFirstHalf","insertBefore","insertAfter","removeChild","targetNode","mousePointer","offsetY","layerY","targetSize","offsetHeight","targetPosition","offsetTop","newNode","referenceNode","DndTest","debug","testing","configure","Promise","config","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Drag and Drop Lists with Aurelia';\n  }\n  \n  list = [\n\t\t{\n\t\t\ttype : \"A\",\n\t\t\tid : \"itemA.0\",\n\t\t\titem : \"Upper A\",\n\t\t\tdraggable : false,\n\t\t\tlist: [\n\t\t\t\t{\n\t\t\t\t\ttype : \"A\",\n\t\t\t\t\titem : \"From A\",\n\t\t\t\t\tid : \"itemA.1\",\n\t\t\t\t\tdraggable : true,\n\t\t\t\t\tlist : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : \"A\",\n\t\t\t\t\t\t\tid : \"itemA.2\",\n\t\t\t\t\t\t\titem : \"in from a\",\n\t\t\t\t\t\t\tdraggable : true,\n\t\t\t\t\t\t\tlist : []\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : \"A\",\n\t\t\t\t\t\t\tid : \"itemA.3\",\n\t\t\t\t\t\t\titem : \"in from a\",\n\t\t\t\t\t\t\tdraggable : true,\n\t\t\t\t\t\t\tlist : []\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\t\n\t\t},\n\t\t{\n\t\t\ttype : \"B\",\n\t\t    id : \"itemB.0\",\n\t\t    item : \"Upper B\",\n\t\t    draggable : true,\n\t\t\tlist : [\n\t\t\t\t{\n\t\t\t\t\ttype : \"B\",\n\t\t\t\t\titem : \"From B\",\n\t\t\t\t\tid : \"itemB.1\",\n\t\t\t\t\tdraggable : true\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t];\n\t\n\tlist2 = [\n\t\t{\n\t\t\ttype : \"A\",\n\t\t\tid : \"itemA.0\",\n\t\t\titem : \"Upper A\",\n\t\t\tdraggable : true,\n\t\t\tlist: [\n\t\t\t\t{\n\t\t\t\t\ttype : \"A\",\n\t\t\t\t\titem : \"From A\",\n\t\t\t\t\tid : \"itemA.1\",\n\t\t\t\t\tdraggable : true,\n\t\t\t\t\tlist : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : \"A\",\n\t\t\t\t\t\t\tid : \"itemA.2\",\n\t\t\t\t\t\t\titem : \"in from a\",\n\t\t\t\t\t\t\tdraggable : true,\n\t\t\t\t\t\t\tlist : []\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : \"A\",\n\t\t\t\t\t\t\tid : \"itemA.3\",\n\t\t\t\t\t\t\titem : \"in from a\",\n\t\t\t\t\t\t\tdraggable : true,\n\t\t\t\t\t\t\tlist : []\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\t\n\t\t},\n\t\t{\n\t\t\ttype : \"B\",\n\t\t    id : \"itemB.0\",\n\t\t    item : \"Upper B\",\n\t\t    draggable : true,\n\t\t\tlist : []\n\t\t}\n\t];\n\t\n\tlist3 = [{}];\n}\n","import {bindable, bindingMode} from 'aurelia-framework';\n\nexport class DraggableItem {\n\teffect = \"move\";\n\tenforceTypeCompatibility = true;\n\t\n\t@bindable({ defaultBindingMode: bindingMode.twoWay }) list;\n\t@bindable({ defaultBindingMode: bindingMode.twoWay }) item;\n\t@bindable({ defaultBindingMode: bindingMode.oneWay }) index;\n\t@bindable({ defaultBindingMode: bindingMode.oneWay }) topLevelItem;\n\t\n\tconstructor(element, dndService) {\n\t\tthis.element = element;\n\t\tthis.dndService = dndService;\n\t}\n\t\n\tonDrag(event, index) {\n\t\tthis.onDragCallback(event, index);\n\t}\n\t\n\tonDragStart(event, index) {\n\t\tthis.dndService.initiateDragging(\n\t\t\tthis.list, \n\t\t\tindex, \n\t\t\tthis.element,\n\t\t\tthis.topLevelItem);\n\t   // Add the target element's id to the data transfer object\n\t   event.dataTransfer.setData(\"text\", JSON.stringify(this.list[index]));\n\t   event.dataTransfer.dropEffect = this.effect;\n\t   this.onDragStartCallback(event, index);\n\t\treturn true;\n\t}\n\t\n\tonDragEnd(event, index) {\n\t\tthis.dndService.cleanUpPlaceHolder();\n\t\tthis.onDragEndCallback(event, index);\n\t}\n\t\n\tonDragEndCallback(event, index) {}\n\t\n\tonDragStartCallback(event, index) {}\n\t\n\tonDragCallback(event, index) {}\n}","import {bindable, bindingMode} from 'aurelia-framework';\n\nexport class DropTarget {\n\teffect = \"move\";\n\tenforceTypeCompatibility = false;\n\t\n\t@bindable({ defaultBindingMode: bindingMode.twoWay }) list;\n\t@bindable({ defaultBindingMode: bindingMode.oneWay }) listHead;\n\t\n\tconstructor(element, dndService) {\n\t\tthis.element = element;\n\t\tthis.dndService = dndService;\n\t}\n\t\n\tonDragOver(event, index) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t   this.dndService.addPlaceHolder(event, this.element, this.list);\n\t   event.dataTransfer.dropEffect = this.effect;\n\t   this.onDragOverCallback(event, index);\n\t   return false;\n\t}\n\t\n\tonDrop(event, index) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\t\n\t\tif (this.enforceTypeCompatibility) {\n\t   \t\tif (this.list[index].type !== undefined && this.list[index].type !== data.type) {\n\t   \t\t\treturn;\n\t   \t\t}\n\t   \t}\n\t   \t   \t\n\t   \t//Remove item from list of origin\n\t   \tthis.dndService.handleDrop();\n\t   \t\n\t\tvar data = JSON.parse(event.dataTransfer.getData(\"text\"));\n\t\t\n\t\t//Clear list of empty object and insert new item in case : [{}]\n\t   \tif (this.list[0].type === undefined) {\n\t   \t\tthis.list.splice(0, 1, data);\n\t   \t\tthis.onDropCallback(event);\n\t   \t\treturn;\n\t   \t} \n\t   \t\n\t\t//Note that target can be element other than placeholder (Needs to be fixed)\n\t\tvar placeholder = this.dndService.getPlaceHolder();\n\t\tif (placeholder.nextSibling.tagName === \"DND-ITEM\") {\n\t\t\tthis.list.splice(this.getSiblingPositionInList(placeholder.nextSibling), 0, data);\n\t\t}\n\t\telse if (placeholder.previousSibling.tagName === \"DND-ITEM\") {\n\t\t\tthis.list.splice(this.getSiblingPositionInList(placeholder.previousSibling) + 1, 0, data);\n\t\t}\n\t\telse {\n\t\t\tconsole.log(\"Undefined\");\n\t\t}\n\t\t\n\t   this.dndService.cleanUpPlaceHolder();\n\t   this.onDropCallback(event);\n\t}\n\t\n\tgetSiblingPositionInList(sibling) {\n\t\tvar id = sibling.childNodes[1].id;\n\t\tfor (var i = 0; i < this.list.length; i++) {\n\t\t\tif (this.list[i].id === id) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\t\n\tonDropCallback(event, index) {}\n\t\n\tonDragOverCallback(event, index) {}\n}","import {inject, bindable, bindingMode} from 'aurelia-framework';\nimport {DraggableItem} from \"./dnd-draggable-item\";\nimport {DragAndDropService} from './dnd-service';\n\n@inject(Element, DragAndDropService)\nexport class DndItem extends DraggableItem {\n\t//Override\n\t// enforceTypeCompatibility = false;\t\n\t\n\tconstructor(element, dndService) {\n\t\tsuper(element, dndService);\n\t}\n\t\n\tonDragStartCallback(event, index) {\n\t\tthis.element.style.opacity = 0.5;\n\t}\n\t\n\tonDragEndCallback(event, index) {\n\t\tthis.element.style.opacity = 1;\n\t}\n}","import {bindable, bindingMode, inject} from 'aurelia-framework';\nimport {DropTarget} from \"./dnd-drop-target\";\nimport {DragAndDropService} from './dnd-service';\n\n@inject(Element, DragAndDropService)\nexport class DndListImpl extends DropTarget {\t\n\tconstructor(element, dndService) {\n\t\tsuper(element, dndService);\n\t}\n\t\n}","import {bindable, bindingMode} from 'aurelia-framework';\n\nexport class DragAndDropList {\n\teffect = \"move\";\n\tenforceTypeCompatibility = true;\n\t\n\t// @bindable({ defaultBindingMode: bindingMode.twoWay }) list;\n// \t@bindable({ defaultBindingMode: bindingMode.twoWay }) item;\n\t\n\tconstructor(element, dndService) {\n\t\tthis.element = element;\n\t\tthis.dndService = dndService;\n\t\tconsole.log(\"Constructed list item\");\n\t}\n\t\n\tonDrag(event) {\n\t\tconsole.log(\"Dragging ...\");\n\t}\n\t\n\tonDragStart(event, index) {\n\t\tthis.dndService.initiateDragging(this.list, index);\n\t\tconsole.log(\"hello\", event.target.id)\n\t   // Add the target element's id to the data transfer object\n\t   event.dataTransfer.setData(\"text\", JSON.stringify(this.list[index]));\n\t   event.dataTransfer.dropEffect = this.effect;\n\t\treturn true;\n\t}\n\t\n\tonDragOver(event, index) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t   this.dndService.addPlaceHolder(event, this.element);\n\t   event.dataTransfer.dropEffect = this.effect;\n\t   //event.dataTransfer.effectAllowed = \"none\";\n\t   return false;\n\t}\n\t\n\tonDrop(event, index) {\n// \t\tconsole.log(event, index);\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tindex = index === undefined ? 0 : index;\n\t   var data = JSON.parse(event.dataTransfer.getData(\"text\"));\n\t   \n// \t   console.log(\"data\", data);\n\t   \n\t   if (this.enforceTypeCompatibility) {\n// \t   \t\tconsole.log(this.list.type, data.type);\n\t   \t\tif (this.list[index].type !== undefined && this.list[index].type !== data.type) {\n\t   \t\t\treturn;\n\t   \t\t}\n\t   }\n\t   this.list.splice(index, 0, data);\n\t   this.dndService.handleDrop();\n\t   this.droppedCallback(event);\n\t}\n\t\n\tdroppedCallback(event) {}\n\t\n}","import {inject} from 'aurelia-framework';\nimport {DOM} from 'aurelia-pal';\n\n@inject(DOM)\nexport class DragAndDropService {\n\tisDragging = false;\n\tlist = []; //List reference from which the element is dragged\n\tindex = -1;\n\tplaceholder = null;\n\telement = null;\n\ttopLevelItem = false;\n\t\n\tconstructor(DOM) {\n\t\tthis.DOM = DOM;\n\t}\n\t\n\tinitiateDragging(list, index, element, topLevelItem) {\n\t\tthis.list = list;\n\t\tthis.index = index;\n\t\tthis.element = element;\n\t\tthis.topLevelItem = topLevelItem;\n\t}\n\t\n\thandleDrop() {\n\t\tthis.list.splice(this.index, 1);\n\t\t//Return list to original empty state : [{}] for top level items only\n\t\tif (this.list.length === 0 && this.topLevelItem) {\n\t\t\tthis.list.push({});\n\t\t}\n\t}\n\t\n\tcreatePlaceholder() {\n\t\tvar element = DOM.createElement(\"div\");\n\t\telement.className = \"dndPlaceholder\";\n\t\treturn element;\n\t}\n\t\n\taddPlaceHolder(event, element, list) {\n\t\tif (event.target.classList.contains(\"dndItem\")) {\n\t\t\tvar listHolder = event.target.parentNode.parentNode;\n\t\t\t\n\t\t\tif (this.placeholder === null) {\n\t\t\t\tthis.placeholder = this.createPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tif (event.target.isEqualNode(this.element)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (list[0].type === undefined) { //Empty list case : [{}]\n\t\t\t\tlistHolder.appendChild(this.placeholder);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (this.isMouseInFirstHalf(event, event.target.parentNode)) {\n\t\t\t\t\tlistHolder.insertBefore(this.placeholder, event.target.parentNode);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.insertAfter(this.placeholder, event.target.parentNode);\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcleanUpPlaceHolder() {\n\t\tthis.placeholder.parentNode.removeChild(this.placeholder)\n\t}\n\t\n\tgetPlaceHolder() {\n\t\treturn this.placeholder;\n\t}\n\t\n\tisMouseInFirstHalf(event, targetNode) {\n        var mousePointer = event.offsetY || event.layerY;\n        var targetSize = targetNode.offsetHeight;\n        var targetPosition = targetNode.offsetTop;\n        targetPosition = 0;\n        return mousePointer < targetPosition + targetSize / 2;\n    }\n    \n    insertAfter(newNode, referenceNode) {\n    \treferenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    }\n}","import {inject} from 'aurelia-framework';\nimport {DragAndDropList} from \"./dnd-list\";\nimport {DragAndDropService} from './dnd-service';\n\n@inject(Element, DragAndDropService)\nexport class DndTest extends DragAndDropList {\n\t//Override\n\tenforceTypeCompatibility = false;\n\t\t\n\tconstructor(element, dndService) {\n\t\tsuper(element, dndService);\n\t}\n\t\n\tdroppedCallback(event) {\n\t\tconsole.log(\"I was dropped!!!\");\n\t}\n}","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n",null,null,null,null],"sourceRoot":"../src"}